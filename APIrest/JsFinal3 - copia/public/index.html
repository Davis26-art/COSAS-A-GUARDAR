<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Inicio - Solicitudes</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container mt-5">

<h1 class="mb-4">ğŸ“‹ MenÃº Principal</h1>

<a href="createSoli.html" class="btn btn-success me-2">â• Crear Solicitud</a>
<a href="readSoli.html" class="btn btn-primary me-2">ğŸ“„ Ver Solicitudes</a>
<a href="editSoli.html" class="btn btn-warning">âœï¸ Editar Solicitudes</a>

<hr>

<div class="mb-3">
  <label for="emailDestino" class="form-label">Correo de destino</label>
  <input type="email" id="emailDestino" class="form-control" placeholder="Ingresa el correo">
</div>
<button id="btnEnviar" class="btn btn-danger">ğŸ“§ Enviar PDF</button>

<script>
document.querySelector('#btnEnviar').addEventListener('click', async () => {
  const email = document.querySelector('#emailDestino').value.trim();
  if (!email) return alert('Ingresa un correo vÃ¡lido');

  try {
    const res = await fetch('/api/solicitudes/enviar', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ email })
    });

    let data;
    try { data = await res.json(); } 
    catch { data = { ok: false, error: 'Respuesta invÃ¡lida del servidor' }; }

    alert(data.msg || data.error);
  } catch (err) {
    alert('âŒ Error al enviar el PDF: ' + err.message);
  }
});
</script>

</body>
</html>
